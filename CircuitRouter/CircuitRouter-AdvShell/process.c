#include "process.h"
#include <time.h> 
#include <stdlib.h>
#include <stdio.h>

/*******************************************************************************
 * createProcess
 *******************************************************************************
*/
Process * createProcess(int pid, time_t start) {
    Process * p = malloc(sizeof(struct process));
    p->pid = pid;
    p->status = 0;
    p->start = start;
    return p;
}

/*******************************************************************************
 * freeProcess
 *******************************************************************************
*/
void freeProcess(Process * p) {
    free(p);
}

/*******************************************************************************
 * processTime
 *******************************************************************************
*/
float processTime(Process * p) {
    return difftime(p->finish, p->start);
}

/*******************************************************************************
 * status
 *******************************************************************************
*/
int status(Process * p) {
    return p->status;
}

/*******************************************************************************
 * getPid
 *******************************************************************************
*/
int getPid(Process * p) {
    return p->pid;
}

/*******************************************************************************
 * printProcess
 *******************************************************************************
*/
void printProcess(Process * p) {
    printf("CHILD EXITED (PID=%d; return %s; %.0f)\n", getPid(p), 
                                    (status(p) == 0 ? "OK" : "NOK"), processTime(p));
}